# æ’å…¥æ’åºç®—æ³• ğŸ“

## ğŸ¯ é¢˜ç›®æè¿°
å®ç°æ’å…¥æ’åºç®—æ³•ï¼Œå¯¹ç»™å®šæ•°ç»„è¿›è¡Œæ’åºã€‚

**è¦æ±‚**ï¼š
- åŸåœ°æ’åºï¼ˆç©ºé—´å¤æ‚åº¦ O(1)ï¼‰
- ç¨³å®šæ’åº
- æ—¶é—´å¤æ‚åº¦ O(nÂ²)

## ğŸ’¡ æˆ‘çš„åŸå§‹æ–¹æ³•

### æ€è·¯åˆ†æ
æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯ï¼š
1. ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œé€ä¸ªæ’å…¥åˆ°å‰é¢å·²æ’åºçš„éƒ¨åˆ†
2. é€šè¿‡æ¯”è¾ƒå’Œç§»åŠ¨ï¼Œæ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®
3. é‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æ’åºå®Œæˆ

### ä»£ç å®ç°
```javascript
function insertionSort(arr) {
    for (let i = 1; i < arr.length; i++) {
        let current = arr[i];
        let j = i - 1;

        // å‘å‰æŸ¥æ‰¾æ’å…¥ä½ç½®
        while (j >= 0 && arr[j] > current) {
            arr[j + 1] = arr[j]; // å…ƒç´ åç§»
            j--;
        }

        arr[j + 1] = current; // æ’å…¥å…ƒç´ 
    }

    return arr;
}

// æµ‹è¯•
console.log(insertionSort([64, 34, 25, 12, 22, 11, 90]));
// è¾“å‡º: [11, 12, 22, 25, 34, 64, 90]
```

### å­˜åœ¨çš„é—®é¢˜
- âŒ ç¼ºå°‘è¾“å…¥éªŒè¯
- âŒ æ²¡æœ‰å¤„ç†è¾¹ç•Œæƒ…å†µ
- âŒ æ³¨é‡Šä¸å¤Ÿè¯¦ç»†
- âŒ å˜é‡å‘½åå¯ä»¥æ›´æ¸…æ™°

## ğŸ”§ æ”¹è¿›ç‰ˆæœ¬

### ä¼˜åŒ–æ€è·¯
1. æ·»åŠ è¾“å…¥éªŒè¯å’Œè¾¹ç•Œå¤„ç†
2. ä¼˜åŒ–å˜é‡å‘½åï¼Œæé«˜å¯è¯»æ€§
3. æ·»åŠ è¯¦ç»†æ³¨é‡Š
4. å¢åŠ æ€§èƒ½ç»Ÿè®¡åŠŸèƒ½

### æ”¹è¿›ä»£ç 
```javascript
/**
 * æ’å…¥æ’åºç®—æ³•ï¼ˆæ”¹è¿›ç‰ˆï¼‰
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * å°†æ•°ç»„åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œé€ä¸ªå°†æœªæ’åºå…ƒç´ 
 * æ’å…¥åˆ°å·²æ’åºéƒ¨åˆ†çš„æ­£ç¡®ä½ç½®
 *
 * @param {number[]} array - å¾…æ’åºæ•°ç»„
 * @returns {number[]} æ’åºåçš„æ•°ç»„
 * @time O(nÂ²) å¹³å‡å’Œæœ€åæƒ…å†µ
 * @space O(1) åŸåœ°æ’åº
 */
function insertionSortImproved(array) {
    // è¾¹ç•Œæƒ…å†µå¤„ç†
    if (!array || !Array.isArray(array)) {
        throw new Error('è¾“å…¥å¿…é¡»æ˜¯æ•°ç»„');
    }

    if (array.length <= 1) {
        return array; // ç©ºæ•°ç»„æˆ–å•å…ƒç´ ç›´æ¥è¿”å›
    }

    let comparisons = 0; // æ¯”è¾ƒæ¬¡æ•°ç»Ÿè®¡
    let swaps = 0;       // ç§»åŠ¨æ¬¡æ•°ç»Ÿè®¡

    // ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æ’å…¥
    for (let currentIndex = 1; currentIndex < array.length; currentIndex++) {
        const currentElement = array[currentIndex];
        let insertPosition = currentIndex - 1;

        // å‘å‰å¯»æ‰¾æ’å…¥ä½ç½®ï¼ŒåŒæ—¶åç§»è¾ƒå¤§å…ƒç´ 
        while (insertPosition >= 0 && array[insertPosition] > currentElement) {
            comparisons++;
            array[insertPosition + 1] = array[insertPosition]; // å…ƒç´ åç§»
            insertPosition--;
            swaps++;
        }

        // æ’å…¥å½“å‰å…ƒç´ åˆ°æ­£ç¡®ä½ç½®
        array[insertPosition + 1] = currentElement;

        if (insertPosition >= 0) comparisons++; // æœ€åä¸€æ¬¡æ¯”è¾ƒ
    }

    console.log(`æ’åºå®Œæˆ - æ¯”è¾ƒæ¬¡æ•°: ${comparisons}, ç§»åŠ¨æ¬¡æ•°: ${swaps}`);
    return array;
}

// å®Œæ•´æµ‹è¯•
function testInsertionSort() {
    const testCases = [
        [],                              // ç©ºæ•°ç»„
        [1],                            // å•å…ƒç´ 
        [3, 1, 4, 1, 5, 9, 2, 6],      // ä¸€èˆ¬æƒ…å†µ
        [1, 2, 3, 4, 5],               // å·²æ’åº
        [5, 4, 3, 2, 1],               // é€†åº
        [3, 3, 3, 3]                   // é‡å¤å…ƒç´ 
    ];

    testCases.forEach((testCase, index) => {
        const original = [...testCase];
        const result = insertionSortImproved([...testCase]);
        console.log(`æµ‹è¯• ${index + 1}: ${original} â†’ ${result}`);
    });
}

testInsertionSort();
```

### æ”¹è¿›äº®ç‚¹
- âœ… æ·»åŠ äº†å®Œæ•´çš„è¾“å…¥éªŒè¯
- âœ… å¤„ç†äº†æ‰€æœ‰è¾¹ç•Œæƒ…å†µ
- âœ… å¢åŠ äº†æ€§èƒ½ç»Ÿè®¡åŠŸèƒ½
- âœ… æä¾›äº†è¯¦ç»†çš„JSDocæ³¨é‡Š
- âœ… åŒ…å«äº†å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹

## ğŸŒŸ æ¨èçš„æœ€ä½³æ–¹æ³•

### æ ‡å‡†å®ç°ï¼ˆæœ€ç®€æ´ï¼‰
```javascript
/**
 * æ’å…¥æ’åº - æ ‡å‡†ç®€æ´ç‰ˆæœ¬
 *
 * è¿™æ˜¯æœ€å®¹æ˜“ç†è§£å’Œè®°å¿†çš„ç‰ˆæœ¬ï¼Œé€‚åˆé¢è¯•å’Œæ•™å­¦
 *
 * @param {number[]} arr - å¾…æ’åºæ•°ç»„
 * @returns {number[]} æ’åºåçš„æ•°ç»„
 */
function insertionSort(arr) {
    for (let i = 1; i < arr.length; i++) {
        let key = arr[i];
        let j = i - 1;

        // ç§»åŠ¨æ‰€æœ‰æ¯”keyå¤§çš„å…ƒç´ 
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j];
            j--;
        }

        // æ’å…¥keyåˆ°æ­£ç¡®ä½ç½®
        arr[j + 1] = key;
    }

    return arr;
}
```

### ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆäºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½®ï¼‰
```javascript
/**
 * æ’å…¥æ’åº - äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–ç‰ˆ
 *
 * ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥å¯»æ‰¾æ’å…¥ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°
 * æ—¶é—´å¤æ‚åº¦ä»ä¸ºO(nÂ²)ï¼Œä½†æ¯”è¾ƒæ¬¡æ•°ä»O(nÂ²)é™åˆ°O(n log n)
 *
 * @param {number[]} arr - å¾…æ’åºæ•°ç»„
 * @returns {number[]} æ’åºåçš„æ•°ç»„
 */
function binaryInsertionSort(arr) {
    for (let i = 1; i < arr.length; i++) {
        const key = arr[i];

        // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æ’å…¥ä½ç½®
        const insertPos = binarySearch(arr, 0, i - 1, key);

        // ç§»åŠ¨å…ƒç´ 
        for (let j = i - 1; j >= insertPos; j--) {
            arr[j + 1] = arr[j];
        }

        // æ’å…¥å…ƒç´ 
        arr[insertPos] = key;
    }

    return arr;
}

/**
 * äºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½®
 */
function binarySearch(arr, left, right, target) {
    while (left <= right) {
        const mid = Math.floor((left + right) / 2);

        if (arr[mid] > target) {
            right = mid - 1;
        } else {
            left = mid + 1;
        }
    }

    return left;
}
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| ç‰ˆæœ¬ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ¯”è¾ƒæ¬¡æ•° | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------------|------------|----------|------|------|
| æˆ‘çš„åŸå§‹ç‰ˆæœ¬ | O(nÂ²) | O(1) | O(nÂ²) | æ€è·¯æ­£ç¡® | ç¼ºå°‘è¾¹ç•Œå¤„ç† |
| æ”¹è¿›ç‰ˆæœ¬ | O(nÂ²) | O(1) | O(nÂ²) | å¥å£®æ€§å¥½ | ä»£ç è¾ƒé•¿ |
| æ ‡å‡†ç‰ˆæœ¬ | O(nÂ²) | O(1) | O(nÂ²) | ç®€æ´æ˜“æ‡‚ | åŠŸèƒ½åŸºç¡€ |
| äºŒåˆ†ä¼˜åŒ–ç‰ˆ | O(nÂ²) | O(1) | O(n log n) | æ¯”è¾ƒæ¬¡æ•°å°‘ | ç§»åŠ¨æ¬¡æ•°ä¸å˜ |

## ğŸ“ çŸ¥è¯†ç‚¹æ€»ç»“

### æ ¸å¿ƒæ¦‚å¿µ
1. **å¢é‡å¼æ„å»º**ï¼šé€æ­¥æ„å»ºå·²æ’åºåºåˆ—
2. **åŸåœ°æ’åº**ï¼šä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´
3. **ç¨³å®šæ’åº**ï¼šç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸å˜
4. **è‡ªé€‚åº”æ€§**ï¼šå¯¹äºæ¥è¿‘æœ‰åºçš„æ•°ç»„æ•ˆç‡å¾ˆé«˜

### é€‚ç”¨åœºæ™¯
- âœ… å°è§„æ¨¡æ•°æ®æ’åºï¼ˆn < 50ï¼‰
- âœ… æ¥è¿‘æœ‰åºçš„æ•°æ®
- âœ… åœ¨çº¿æ’åºï¼ˆæ•°æ®é€ä¸ªåˆ°è¾¾ï¼‰
- âœ… ä½œä¸ºå…¶ä»–ç®—æ³•çš„å­è¿‡ç¨‹

### é¢è¯•è¦ç‚¹
1. **æ—¶é—´å¤æ‚åº¦**ï¼šæœ€å¥½O(n)ï¼Œå¹³å‡å’Œæœ€åO(nÂ²)
2. **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
3. **ç¨³å®šæ€§**ï¼šç¨³å®šæ’åºç®—æ³•
4. **å®é™…åº”ç”¨**ï¼šå°æ•°ç»„æ’åºã€å¿«æ’çš„ä¼˜åŒ–

## ğŸ’­ å­¦ä¹ å¿ƒå¾—

### æˆ‘çš„æ”¶è·
1. **ç†è§£äº†æ’åºçš„æœ¬è´¨**ï¼šé€šè¿‡æ¯”è¾ƒå’Œç§»åŠ¨å»ºç«‹æœ‰åº
2. **å­¦ä¼šäº†è¾¹ç•Œå¤„ç†**ï¼šç©ºæ•°ç»„ã€å•å…ƒç´ ç­‰ç‰¹æ®Šæƒ…å†µ
3. **æŒæ¡äº†ä¼˜åŒ–æ€è·¯**ï¼šäºŒåˆ†æŸ¥æ‰¾ã€æ€§èƒ½ç»Ÿè®¡ç­‰
4. **æé«˜äº†ä»£ç è´¨é‡**ï¼šæ³¨é‡Šã€å‘½åã€æµ‹è¯•çš„é‡è¦æ€§

### æ˜“é”™ç‚¹æ€»ç»“
- ğŸš¨ å¾ªç¯è¾¹ç•Œï¼š`i` ä» 1 å¼€å§‹ï¼Œä¸æ˜¯ 0
- ğŸš¨ æ¯”è¾ƒæ¡ä»¶ï¼š`arr[j] > key` è€Œä¸æ˜¯ `>=`ï¼ˆä¿è¯ç¨³å®šæ€§ï¼‰
- ğŸš¨ æ’å…¥ä½ç½®ï¼š`j + 1` è€Œä¸æ˜¯ `j`
- ğŸš¨ æ•°ç»„è¶Šç•Œï¼šæ£€æŸ¥ `j >= 0` çš„æ¡ä»¶

---
*å­¦ä¹ æ—¥æœŸï¼š2024å¹´ | éš¾åº¦ï¼šâ­â­â˜†â˜†â˜†*
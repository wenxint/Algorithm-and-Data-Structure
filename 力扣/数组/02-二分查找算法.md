# äºŒåˆ†æŸ¥æ‰¾ç®—æ³• ğŸ”

## ğŸ¯ é¢˜ç›®æè¿°
åœ¨ä¸€ä¸ªæœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ï¼Œè¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨ï¼Œè¿”å› -1ã€‚

**è¦æ±‚**ï¼š
- æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ O(log n)
- æ•°ç»„æ˜¯å‡åºæ’åˆ—çš„
- ä¸èƒ½ä½¿ç”¨å†…ç½®çš„æŸ¥æ‰¾æ–¹æ³•

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥: nums = [1,3,5,6,7,8,10], target = 6
è¾“å‡º: 3

è¾“å…¥: nums = [1,3,5,6,7,8,10], target = 4
è¾“å‡º: -1
```

## ğŸ’¡ æˆ‘çš„åŸå§‹æ–¹æ³•

### æ€è·¯åˆ†æ
æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯ï¼š
1. è®¾ç½®å·¦å³æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾
2. è®¡ç®—ä¸­ç‚¹ï¼Œæ¯”è¾ƒä¸­ç‚¹å€¼ä¸ç›®æ ‡å€¼
3. æ ¹æ®æ¯”è¾ƒç»“æœç¼©å°æŸ¥æ‰¾èŒƒå›´
4. é‡å¤ç›´åˆ°æ‰¾åˆ°ç›®æ ‡æˆ–èŒƒå›´ä¸ºç©º

### ä»£ç å®ç°
```javascript
function binarySearch(nums, target) {
    let left = 0;
    let right = nums.length - 1;

    while (left <= right) {
        let mid = Math.floor((left + right) / 2);

        if (nums[mid] === target) {
            return mid;
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return -1;
}

// æµ‹è¯•
console.log(binarySearch([1,3,5,6,7,8,10], 6)); // 3
console.log(binarySearch([1,3,5,6,7,8,10], 4)); // -1
```

### å­˜åœ¨çš„é—®é¢˜
- âŒ æ²¡æœ‰è¾“å…¥éªŒè¯
- âŒ æ²¡æœ‰å¤„ç†ç©ºæ•°ç»„ç­‰è¾¹ç•Œæƒ…å†µ
- âŒ å¯èƒ½å­˜åœ¨æ•´æ•°æº¢å‡ºé£é™©ï¼ˆå¤§æ•°ç»„æ—¶ï¼‰
- âŒ ç¼ºå°‘è¯¦ç»†æ³¨é‡Š

## ğŸ”§ æ”¹è¿›ç‰ˆæœ¬

### ä¼˜åŒ–æ€è·¯
1. æ·»åŠ è¾“å…¥éªŒè¯å’Œè¾¹ç•Œå¤„ç†
2. é˜²æ­¢æ•´æ•°æº¢å‡º
3. æ·»åŠ è°ƒè¯•ä¿¡æ¯å’Œæ€§èƒ½ç»Ÿè®¡
4. ä¼˜åŒ–å˜é‡å‘½åå’Œæ³¨é‡Š

### æ”¹è¿›ä»£ç 
```javascript
/**
 * äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆæ”¹è¿›ç‰ˆï¼‰
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * åˆ†æ²»æ³•æ€æƒ³ï¼Œæ¯æ¬¡å°†æŸ¥æ‰¾èŒƒå›´ç¼©å°ä¸€åŠï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å€¼æˆ–ç¡®è®¤ä¸å­˜åœ¨
 * åˆ©ç”¨æ•°ç»„æœ‰åºçš„ç‰¹æ€§ï¼Œé€šè¿‡æ¯”è¾ƒä¸­é—´å…ƒç´ æ¥å†³å®šæœç´¢æ–¹å‘
 *
 * @param {number[]} sortedArray - å·²æ’åºçš„æ•°ç»„
 * @param {number} target - ç›®æ ‡å€¼
 * @returns {number} ç›®æ ‡å€¼çš„ç´¢å¼•ï¼Œæœªæ‰¾åˆ°è¿”å›-1
 * @time O(log n) å¯¹æ•°æ—¶é—´å¤æ‚åº¦
 * @space O(1) å¸¸æ•°ç©ºé—´å¤æ‚åº¦
 */
function binarySearchImproved(sortedArray, target) {
    // è¾“å…¥éªŒè¯
    if (!sortedArray || !Array.isArray(sortedArray)) {
        throw new Error('è¾“å…¥å¿…é¡»æ˜¯æ•°ç»„');
    }

    if (typeof target !== 'number') {
        throw new Error('ç›®æ ‡å€¼å¿…é¡»æ˜¯æ•°å­—');
    }

    // è¾¹ç•Œæƒ…å†µå¤„ç†
    if (sortedArray.length === 0) {
        return -1; // ç©ºæ•°ç»„ç›´æ¥è¿”å›-1
    }

    let leftPointer = 0;
    let rightPointer = sortedArray.length - 1;
    let iterations = 0; // è¿­ä»£æ¬¡æ•°ç»Ÿè®¡

    console.log(`å¼€å§‹æŸ¥æ‰¾ç›®æ ‡å€¼ ${target}ï¼Œæ•°ç»„é•¿åº¦: ${sortedArray.length}`);

    while (leftPointer <= rightPointer) {
        iterations++;

        // é˜²æ­¢æ•´æ•°æº¢å‡ºçš„ä¸­ç‚¹è®¡ç®—æ–¹æ³•
        const middleIndex = leftPointer + Math.floor((rightPointer - leftPointer) / 2);
        const middleValue = sortedArray[middleIndex];

        console.log(`ç¬¬${iterations}æ¬¡æŸ¥æ‰¾: èŒƒå›´[${leftPointer}, ${rightPointer}], ä¸­ç‚¹=${middleIndex}, å€¼=${middleValue}`);

        if (middleValue === target) {
            console.log(`æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œä½ç½®: ${middleIndex}, å…±æŸ¥æ‰¾${iterations}æ¬¡`);
            return middleIndex;
        } else if (middleValue < target) {
            // ç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†
            leftPointer = middleIndex + 1;
            console.log(`ç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†ï¼Œæ–°èŒƒå›´: [${leftPointer}, ${rightPointer}]`);
        } else {
            // ç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†
            rightPointer = middleIndex - 1;
            console.log(`ç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†ï¼Œæ–°èŒƒå›´: [${leftPointer}, ${rightPointer}]`);
        }
    }

    console.log(`æœªæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå…±æŸ¥æ‰¾${iterations}æ¬¡`);
    return -1;
}

// å®Œæ•´æµ‹è¯•å‡½æ•°
function testBinarySearch() {
    const testCases = [
        { array: [], target: 5, expected: -1 },                    // ç©ºæ•°ç»„
        { array: [1], target: 1, expected: 0 },                    // å•å…ƒç´ -æ‰¾åˆ°
        { array: [1], target: 2, expected: -1 },                   // å•å…ƒç´ -æœªæ‰¾åˆ°
        { array: [1,3,5,6,7,8,10], target: 6, expected: 3 },       // ä¸€èˆ¬æƒ…å†µ-æ‰¾åˆ°
        { array: [1,3,5,6,7,8,10], target: 4, expected: -1 },      // ä¸€èˆ¬æƒ…å†µ-æœªæ‰¾åˆ°
        { array: [1,3,5,6,7,8,10], target: 1, expected: 0 },       // ç¬¬ä¸€ä¸ªå…ƒç´ 
        { array: [1,3,5,6,7,8,10], target: 10, expected: 6 },      // æœ€åä¸€ä¸ªå…ƒç´ 
        { array: [1,1,1,1,1], target: 1, expected: 2 }             // é‡å¤å…ƒç´ 
    ];

    testCases.forEach((testCase, index) => {
        console.log(`\n=== æµ‹è¯•ç”¨ä¾‹ ${index + 1} ===`);
        const result = binarySearchImproved(testCase.array, testCase.target);
        const passed = result === testCase.expected;
        console.log(`è¾“å…¥: [${testCase.array}], ç›®æ ‡: ${testCase.target}`);
        console.log(`æœŸæœ›: ${testCase.expected}, å®é™…: ${result}, ${passed ? 'âœ…é€šè¿‡' : 'âŒå¤±è´¥'}`);
    });
}

testBinarySearch();
```

### æ”¹è¿›äº®ç‚¹
- âœ… æ·»åŠ äº†å®Œæ•´çš„è¾“å…¥éªŒè¯
- âœ… é˜²æ­¢äº†æ•´æ•°æº¢å‡ºé—®é¢˜
- âœ… åŒ…å«è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- âœ… ç»Ÿè®¡äº†æŸ¥æ‰¾æ€§èƒ½
- âœ… å¤„ç†äº†å„ç§è¾¹ç•Œæƒ…å†µ

## ğŸŒŸ æ¨èçš„æœ€ä½³æ–¹æ³•

### æ ‡å‡†å®ç°ï¼ˆé¢è¯•æ¨èï¼‰
```javascript
/**
 * äºŒåˆ†æŸ¥æ‰¾ - æ ‡å‡†ç®€æ´ç‰ˆæœ¬
 *
 * è¿™æ˜¯æœ€å®¹æ˜“ç†è§£å’Œè®°å¿†çš„ç‰ˆæœ¬ï¼Œé€‚åˆé¢è¯•ä½¿ç”¨
 *
 * @param {number[]} nums - æœ‰åºæ•°ç»„
 * @param {number} target - ç›®æ ‡å€¼
 * @returns {number} ç›®æ ‡ç´¢å¼•æˆ–-1
 */
function binarySearch(nums, target) {
    let left = 0;
    let right = nums.length - 1;

    while (left <= right) {
        const mid = left + Math.floor((right - left) / 2);

        if (nums[mid] === target) {
            return mid;
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return -1;
}
```

### é€’å½’å®ç°
```javascript
/**
 * äºŒåˆ†æŸ¥æ‰¾ - é€’å½’ç‰ˆæœ¬
 *
 * ä½¿ç”¨é€’å½’æ–¹å¼å®ç°ï¼Œä»£ç æ›´ç®€æ´ä½†ä¼šæ¶ˆè€—é¢å¤–çš„æ ˆç©ºé—´
 *
 * @param {number[]} nums - æœ‰åºæ•°ç»„
 * @param {number} target - ç›®æ ‡å€¼
 * @param {number} left - å·¦è¾¹ç•Œ
 * @param {number} right - å³è¾¹ç•Œ
 * @returns {number} ç›®æ ‡ç´¢å¼•æˆ–-1
 */
function binarySearchRecursive(nums, target, left = 0, right = nums.length - 1) {
    // é€’å½’ç»ˆæ­¢æ¡ä»¶
    if (left > right) {
        return -1;
    }

    const mid = left + Math.floor((right - left) / 2);

    if (nums[mid] === target) {
        return mid;
    } else if (nums[mid] < target) {
        return binarySearchRecursive(nums, target, mid + 1, right);
    } else {
        return binarySearchRecursive(nums, target, left, mid - 1);
    }
}
```

### é€šç”¨æ¨¡æ¿ï¼ˆå·¦è¾¹ç•ŒæŸ¥æ‰¾ï¼‰
```javascript
/**
 * æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„å…ƒç´ ä½ç½®
 *
 * è¿™æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„é€šç”¨æ¨¡æ¿ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šå˜ç§é—®é¢˜
 *
 * @param {number[]} nums - æœ‰åºæ•°ç»„
 * @param {number} target - ç›®æ ‡å€¼
 * @returns {number} ç¬¬ä¸€ä¸ª>=targetçš„ä½ç½®
 */
function binarySearchLeftBound(nums, target) {
    let left = 0;
    let right = nums.length;

    while (left < right) {
        const mid = left + Math.floor((right - left) / 2);

        if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid;
        }
    }

    return left;
}

/**
 * æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºç­‰äºtargetçš„å…ƒç´ ä½ç½®
 *
 * @param {number[]} nums - æœ‰åºæ•°ç»„
 * @param {number} target - ç›®æ ‡å€¼
 * @returns {number} æœ€åä¸€ä¸ª<=targetçš„ä½ç½®
 */
function binarySearchRightBound(nums, target) {
    let left = 0;
    let right = nums.length;

    while (left < right) {
        const mid = left + Math.floor((right - left) / 2);

        if (nums[mid] <= target) {
            left = mid + 1;
        } else {
            right = mid;
        }
    }

    return left - 1;
}
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| ç‰ˆæœ¬ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------------|------------|------|------|----------|
| æˆ‘çš„åŸå§‹ç‰ˆæœ¬ | O(log n) | O(1) | æ€è·¯æ­£ç¡® | ç¼ºå°‘è¾¹ç•Œå¤„ç† | åŸºç¡€ç»ƒä¹  |
| æ”¹è¿›ç‰ˆæœ¬ | O(log n) | O(1) | å¥å£®æ€§å¥½ | ä»£ç è¾ƒé•¿ | ç”Ÿäº§ç¯å¢ƒ |
| æ ‡å‡†ç‰ˆæœ¬ | O(log n) | O(1) | ç®€æ´æ˜“è®° | åŠŸèƒ½åŸºç¡€ | é¢è¯•æ¨è |
| é€’å½’ç‰ˆæœ¬ | O(log n) | O(log n) | ä»£ç ç®€æ´ | é¢å¤–æ ˆç©ºé—´ | æ•™å­¦æ¼”ç¤º |
| é€šç”¨æ¨¡æ¿ | O(log n) | O(1) | é€‚ç”¨æ€§å¹¿ | ç†è§£éš¾åº¦å¤§ | é«˜çº§åº”ç”¨ |

## ğŸ“ çŸ¥è¯†ç‚¹æ€»ç»“

### æ ¸å¿ƒæ¦‚å¿µ
1. **åˆ†æ²»æ€æƒ³**ï¼šå°†é—®é¢˜è§„æ¨¡ä¸æ–­ç¼©å°ä¸€åŠ
2. **æœ‰åºæ€§è´¨**ï¼šå¿…é¡»åœ¨æœ‰åºæ•°ç»„ä¸­ä½¿ç”¨
3. **åŒæŒ‡é’ˆæŠ€æœ¯**ï¼šleft å’Œ right æŒ‡é’ˆç»´æŠ¤æœç´¢èŒƒå›´
4. **ä¸­ç‚¹è®¡ç®—**ï¼šé˜²æ­¢æ•´æ•°æº¢å‡ºçš„å®‰å…¨è®¡ç®—æ–¹æ³•

### å…³é”®æŠ€å·§
- **å¾ªç¯ä¸å˜é‡**ï¼šæ˜ç¡® left å’Œ right çš„å«ä¹‰
- **è¾¹ç•Œå¤„ç†**ï¼šwhile æ¡ä»¶æ˜¯ `<=` è¿˜æ˜¯ `<`
- **ä¸­ç‚¹é€‰æ‹©**ï¼šå‘ä¸‹å–æ•´è¿˜æ˜¯å‘ä¸Šå–æ•´
- **æœç´¢ç©ºé—´**ï¼š`[left, right]` è¿˜æ˜¯ `[left, right)`

### å¸¸è§å˜ç§
1. **æŸ¥æ‰¾æ’å…¥ä½ç½®**ï¼šleetcode 35
2. **æŸ¥æ‰¾å³°å€¼**ï¼šleetcode 162
3. **æœç´¢æ—‹è½¬æ•°ç»„**ï¼šleetcode 33
4. **æŸ¥æ‰¾èŒƒå›´**ï¼šleetcode 34

## ğŸš¨ å¸¸è§é™·é˜±

### è¾¹ç•Œé—®é¢˜
```javascript
// âŒ é”™è¯¯ï¼šå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯
while (left < right) {
    let mid = Math.floor((left + right) / 2);
    if (nums[mid] <= target) {
        left = mid;  // å±é™©ï¼šleftå¯èƒ½ä¸å˜
    } else {
        right = mid - 1;
    }
}

// âœ… æ­£ç¡®ï¼šç¡®ä¿æœç´¢èŒƒå›´ä¸€å®šä¼šç¼©å°
while (left < right) {
    let mid = Math.floor((left + right) / 2);
    if (nums[mid] < target) {
        left = mid + 1;  // å®‰å…¨ï¼šleftä¸€å®šä¼šå¢åŠ 
    } else {
        right = mid;
    }
}
```

### æ•´æ•°æº¢å‡º
```javascript
// âŒ é”™è¯¯ï¼šå¤§æ•°ç»„æ—¶å¯èƒ½æº¢å‡º
let mid = Math.floor((left + right) / 2);

// âœ… æ­£ç¡®ï¼šé˜²æ­¢æº¢å‡ºçš„å®‰å…¨æ–¹æ³•
let mid = left + Math.floor((right - left) / 2);
```

## ğŸ’­ å­¦ä¹ å¿ƒå¾—

### æˆ‘çš„æ”¶è·
1. **ç†è§£äº†åˆ†æ²»æ€æƒ³**ï¼šæ¯æ¬¡æ’é™¤ä¸€åŠçš„æœç´¢ç©ºé—´
2. **æŒæ¡äº†è¾¹ç•ŒæŠ€å·§**ï¼šä¸åŒçš„å¾ªç¯æ¡ä»¶é€‚ç”¨ä¸åŒåœºæ™¯
3. **å­¦ä¼šäº†é˜²é”™æŠ€å·§**ï¼šæ•´æ•°æº¢å‡ºã€æ— é™å¾ªç¯ç­‰é™·é˜±
4. **åŸ¹å…»äº†æ•°å­¦æ€ç»´**ï¼šå¯¹æ•°å¤æ‚åº¦çš„å¨åŠ›

### é¢è¯•æŠ€å·§
- ğŸ¯ **å…ˆç¡®è®¤è¾¹ç•Œ**ï¼šé—®æ¸…æ¥šæ•°ç»„æ˜¯å¦æœ‰åºã€æ˜¯å¦æœ‰é‡å¤å…ƒç´ 
- ğŸ¯ **ç”»å›¾åŠ©ç†è§£**ï¼šåœ¨çº¸ä¸Šç”»å‡ºæœç´¢è¿‡ç¨‹
- ğŸ¯ **æµ‹è¯•è¾¹ç•Œç”¨ä¾‹**ï¼šç©ºæ•°ç»„ã€å•å…ƒç´ ã€ç›®æ ‡åœ¨ä¸¤ç«¯ç­‰
- ğŸ¯ **ä»£ç è¦ç®€æ´**ï¼šé¢è¯•æ—¶ç”¨æ ‡å‡†ç‰ˆæœ¬ï¼Œä¸è¦è¿‡åº¦ä¼˜åŒ–

### å®é™…åº”ç”¨
- ğŸ” **æ•°æ®åº“ç´¢å¼•**ï¼šBæ ‘ç´¢å¼•çš„æŸ¥æ‰¾åŸç†
- ğŸ” **ç³»ç»Ÿè®¾è®¡**ï¼šè´Ÿè½½å‡è¡¡ã€åˆ†ç‰‡è·¯ç”±
- ğŸ” **ç®—æ³•ä¼˜åŒ–**ï¼šå°†çº¿æ€§æŸ¥æ‰¾ä¼˜åŒ–ä¸ºå¯¹æ•°æŸ¥æ‰¾
- ğŸ” **è°ƒè¯•æŠ€æœ¯**ï¼šäºŒåˆ†è°ƒè¯•æ³•å®šä½é—®é¢˜

---
*å­¦ä¹ æ—¥æœŸï¼š2024å¹´ | éš¾åº¦ï¼šâ­â­â­â˜†â˜†*
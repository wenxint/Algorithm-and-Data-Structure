# å›æº¯ç®—æ³•æ’¤é”€æ—¶æœºè¯¦è§£ ğŸ”

## ğŸ¤” æ‚¨çš„å›°æƒ‘å¾ˆæœ‰é“ç†ï¼

æ‚¨è§‚å¯Ÿåˆ°çš„ç°è±¡ç¡®å®å­˜åœ¨ï¼š**çœ‹èµ·æ¥åªæœ‰åœ¨è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶åæ‰ä¼šæ‰§è¡Œ `currentCombination.pop()`**

ä½†è¿™å…¶å®æ˜¯å¯¹**é€’å½’æ‰§è¡Œæµç¨‹**çš„ä¸€ä¸ªå¸¸è§è¯¯è§£ã€‚è®©æˆ‘è¯¦ç»†è§£é‡ŠçœŸæ­£çš„æ‰§è¡Œè¿‡ç¨‹ã€‚

## ğŸ¯ å…³é”®ç†è§£ï¼šé€’å½’çš„æœ¬è´¨

### æ ¸å¿ƒè¦ç‚¹
**æ¯ä¸ªé€’å½’è°ƒç”¨éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œæµç¨‹ï¼Œ`pop()` æ“ä½œä¼šåœ¨å¤šä¸ªæ—¶æœºæ‰§è¡Œï¼Œä¸ä»…ä»…æ˜¯è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶åï¼**

## ğŸ’» è¯¦ç»†çš„æ‰§è¡Œæµç¨‹åˆ†æ

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šä» `[1, 2, 3]` ä¸­é€‰ 2 ä¸ªæ•°ã€‚

```javascript
function combinations(nums, k) {
    const result = [];
    const currentCombination = [];

    function backtrack(startIndex) {
        console.log(`ğŸ”„ è¿›å…¥é€’å½’: startIndex=${startIndex}, å½“å‰ç»„åˆ=[${currentCombination}]`);

        // ç»ˆæ­¢æ¡ä»¶
        if (currentCombination.length === k) {
            result.push([...currentCombination]);
            console.log(`âœ… æ‰¾åˆ°è§£: [${currentCombination}], å‡†å¤‡è¿”å›`);
            return; // ğŸ”´ è¿™é‡Œè¿”å›ï¼Œä½†æ³¨æ„åç»­è¿˜æœ‰ä»£ç è¦æ‰§è¡Œï¼
        }

        for (let i = startIndex; i < nums.length; i++) {
            // åšé€‰æ‹©
            currentCombination.push(nums[i]);
            console.log(`â• é€‰æ‹© ${nums[i]}, å½“å‰ç»„åˆ=[${currentCombination}]`);

            // é€’å½’æ¢ç´¢
            console.log(`ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(${i + 1})`);
            backtrack(i + 1);
            console.log(`ğŸ”™ é€’å½’è°ƒç”¨ backtrack(${i + 1}) è¿”å›äº†`);

            // æ’¤é”€é€‰æ‹© - ğŸ”´ è¿™é‡Œæ˜¯å…³é”®ï¼
            const removed = currentCombination.pop();
            console.log(`âŒ æ’¤é”€é€‰æ‹© ${removed}, å½“å‰ç»„åˆ=[${currentCombination}]`);
        }

        console.log(`ğŸ forå¾ªç¯ç»“æŸ, å³å°†ä» backtrack(${startIndex}) è¿”å›`);
    }

    backtrack(0);
    return result;
}
```

## ğŸ¬ é€æ­¥æ‰§è¡Œæ¼”ç¤º

### è°ƒç”¨ `combinations([1, 2, 3], 2)` çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹ï¼š

```
ğŸ”„ è¿›å…¥é€’å½’: startIndex=0, å½“å‰ç»„åˆ=[]

  // ç¬¬ä¸€æ¬¡å¾ªç¯ i=0 (é€‰æ‹©æ•°å­—1)
  â• é€‰æ‹© 1, å½“å‰ç»„åˆ=[1]
  ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(1)

    ğŸ”„ è¿›å…¥é€’å½’: startIndex=1, å½“å‰ç»„åˆ=[1]

      // å†…å±‚ç¬¬ä¸€æ¬¡å¾ªç¯ i=1 (é€‰æ‹©æ•°å­—2)
      â• é€‰æ‹© 2, å½“å‰ç»„åˆ=[1, 2]
      ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(2)

        ğŸ”„ è¿›å…¥é€’å½’: startIndex=2, å½“å‰ç»„åˆ=[1, 2]
        âœ… æ‰¾åˆ°è§£: [1, 2], å‡†å¤‡è¿”å›
        // è¿™é‡Œreturnï¼Œä½†æ˜¯è¦å›åˆ°ä¸Šä¸€å±‚ç»§ç»­æ‰§è¡Œ

      ğŸ”™ é€’å½’è°ƒç”¨ backtrack(2) è¿”å›äº†
      âŒ æ’¤é”€é€‰æ‹© 2, å½“å‰ç»„åˆ=[1]  // ğŸ”´ ç¬¬ä¸€æ¬¡æ’¤é”€ï¼

      // å†…å±‚ç¬¬äºŒæ¬¡å¾ªç¯ i=2 (é€‰æ‹©æ•°å­—3)
      â• é€‰æ‹© 3, å½“å‰ç»„åˆ=[1, 3]
      ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(3)

        ğŸ”„ è¿›å…¥é€’å½’: startIndex=3, å½“å‰ç»„åˆ=[1, 3]
        âœ… æ‰¾åˆ°è§£: [1, 3], å‡†å¤‡è¿”å›

      ğŸ”™ é€’å½’è°ƒç”¨ backtrack(3) è¿”å›äº†
      âŒ æ’¤é”€é€‰æ‹© 3, å½“å‰ç»„åˆ=[1]  // ğŸ”´ ç¬¬äºŒæ¬¡æ’¤é”€ï¼

    ğŸ forå¾ªç¯ç»“æŸ, å³å°†ä» backtrack(1) è¿”å›

  ğŸ”™ é€’å½’è°ƒç”¨ backtrack(1) è¿”å›äº†
  âŒ æ’¤é”€é€‰æ‹© 1, å½“å‰ç»„åˆ=[]  // ğŸ”´ ç¬¬ä¸‰æ¬¡æ’¤é”€ï¼

  // å¤–å±‚ç¬¬äºŒæ¬¡å¾ªç¯ i=1 (é€‰æ‹©æ•°å­—2)
  â• é€‰æ‹© 2, å½“å‰ç»„åˆ=[2]
  ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(2)

    ğŸ”„ è¿›å…¥é€’å½’: startIndex=2, å½“å‰ç»„åˆ=[2]

      // å†…å±‚å¾ªç¯ i=2 (é€‰æ‹©æ•°å­—3)
      â• é€‰æ‹© 3, å½“å‰ç»„åˆ=[2, 3]
      ğŸš€ å³å°†é€’å½’è°ƒç”¨ backtrack(3)

        ğŸ”„ è¿›å…¥é€’å½’: startIndex=3, å½“å‰ç»„åˆ=[2, 3]
        âœ… æ‰¾åˆ°è§£: [2, 3], å‡†å¤‡è¿”å›

      ğŸ”™ é€’å½’è°ƒç”¨ backtrack(3) è¿”å›äº†
      âŒ æ’¤é”€é€‰æ‹© 3, å½“å‰ç»„åˆ=[2]  // ğŸ”´ ç¬¬å››æ¬¡æ’¤é”€ï¼

    ğŸ forå¾ªç¯ç»“æŸ, å³å°†ä» backtrack(2) è¿”å›

  ğŸ”™ é€’å½’è°ƒç”¨ backtrack(2) è¿”å›äº†
  âŒ æ’¤é”€é€‰æ‹© 2, å½“å‰ç»„åˆ=[]  // ğŸ”´ ç¬¬äº”æ¬¡æ’¤é”€ï¼

ğŸ forå¾ªç¯ç»“æŸ, å³å°†ä» backtrack(0) è¿”å›

æœ€ç»ˆç»“æœ: [[1,2], [1,3], [2,3]]
```

## ğŸ” å…³é”®æ´å¯Ÿ

### 1. **æ’¤é”€å‘ç”Ÿåœ¨å¤šä¸ªæ—¶æœº**
- âœ… **æ¯æ¬¡é€’å½’è°ƒç”¨è¿”å›å**éƒ½ä¼šæ‰§è¡Œæ’¤é”€
- âŒ **ä¸æ˜¯åªåœ¨è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶å**æ‰æ’¤é”€

### 2. **é€’å½’è°ƒç”¨æ ˆçš„å½±å“**
```javascript
backtrack(0) {
    for i in [0, 1, 2] {
        é€‰æ‹© nums[i]
        backtrack(i+1) {  // ğŸ”´ è¿™é‡Œä¼šè¿”å›åˆ°å½“å‰ä½ç½®
            for j in [...] {
                // ... æ›´æ·±çš„é€’å½’
            }
        } // ğŸ”´ å½“è¿™é‡Œè¿”å›æ—¶ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ’¤é”€
        æ’¤é”€ nums[i]  // ğŸ”´ è¿™é‡Œä¸€å®šä¼šæ‰§è¡Œï¼
    }
}
```

### 3. **ä¸ºä»€ä¹ˆçœ‹èµ·æ¥åƒæ˜¯"åªåœ¨ç»ˆæ­¢æ¡ä»¶åæ’¤é”€"ï¼Ÿ**
å› ä¸º**æœ€æ·±å±‚çš„é€’å½’**ï¼ˆè¾¾åˆ°ç»ˆæ­¢æ¡ä»¶çš„é‚£å±‚ï¼‰æ²¡æœ‰forå¾ªç¯ï¼Œæ‰€ä»¥ï¼š
- è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ â†’ `return`
- ç›´æ¥è¿”å›åˆ°ä¸Šä¸€å±‚
- ä¸Šä¸€å±‚ç»§ç»­æ‰§è¡Œ `pop()` æ“ä½œ

ä½†å®é™…ä¸Šï¼Œ**æ¯ä¸€å±‚é€’å½’çš„forå¾ªç¯éƒ½ä¼šæ‰§è¡Œæ’¤é”€æ“ä½œ**ï¼

## ğŸ¨ å¯è§†åŒ–è°ƒç”¨æ ˆ

```
è°ƒç”¨æ ˆæ¼”ç¤ºï¼ˆé€‰æ‹©è·¯å¾„ [1,2]ï¼‰ï¼š

backtrack(0) - å½“å‰ç»„åˆ:[]
â”‚
â”œâ”€ é€‰æ‹©1 â†’ å½“å‰ç»„åˆ:[1]
â”‚  â”‚
â”‚  â””â”€ backtrack(1) - å½“å‰ç»„åˆ:[1]
â”‚     â”‚
â”‚     â”œâ”€ é€‰æ‹©2 â†’ å½“å‰ç»„åˆ:[1,2]
â”‚     â”‚  â”‚
â”‚     â”‚  â””â”€ backtrack(2) - å½“å‰ç»„åˆ:[1,2]
â”‚     â”‚     â”‚
â”‚     â”‚     â””â”€ è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ï¼Œreturn âœ…
â”‚     â”‚
â”‚     â”œâ”€ æ’¤é”€2 â† å½“å‰ç»„åˆ:[1] ğŸ”´
â”‚     â”œâ”€ é€‰æ‹©3 â†’ å½“å‰ç»„åˆ:[1,3]
â”‚     â”‚  â””â”€ backtrack(3) â†’ è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ï¼Œreturn âœ…
â”‚     â””â”€ æ’¤é”€3 â† å½“å‰ç»„åˆ:[1] ğŸ”´
â”‚
â””â”€ æ’¤é”€1 â† å½“å‰ç»„åˆ:[] ğŸ”´
```

## ğŸ§ª å®é™…æµ‹è¯•ä»£ç 

```javascript
function demonstrateBacktrackTiming() {
    console.log('=== å›æº¯æ’¤é”€æ—¶æœºæ¼”ç¤º ===');

    const nums = [1, 2, 3];
    const k = 2;
    const result = [];
    const currentCombination = [];
    let stepCount = 0;

    function backtrack(startIndex) {
        stepCount++;
        const currentStep = stepCount;
        const indent = '  '.repeat(currentCombination.length);

        console.log(`${indent}[æ­¥éª¤${currentStep}] ğŸ”„ è¿›å…¥ backtrack(${startIndex}), ç»„åˆ=[${currentCombination}]`);

        // ç»ˆæ­¢æ¡ä»¶
        if (currentCombination.length === k) {
            result.push([...currentCombination]);
            console.log(`${indent}[æ­¥éª¤${currentStep}] âœ… æ‰¾åˆ°è§£ï¼Œå‡†å¤‡è¿”å›`);
            return;
        }

        for (let i = startIndex; i < nums.length; i++) {
            // åšé€‰æ‹©
            currentCombination.push(nums[i]);
            console.log(`${indent}[æ­¥éª¤${currentStep}] â• é€‰æ‹© ${nums[i]}, ç»„åˆ=[${currentCombination}]`);

            // é€’å½’æ¢ç´¢
            console.log(`${indent}[æ­¥éª¤${currentStep}] ğŸš€ è°ƒç”¨ backtrack(${i + 1})`);
            backtrack(i + 1);
            console.log(`${indent}[æ­¥éª¤${currentStep}] ğŸ”™ backtrack(${i + 1}) è¿”å›äº†`);

            // æ’¤é”€é€‰æ‹©
            const removed = currentCombination.pop();
            console.log(`${indent}[æ­¥éª¤${currentStep}] âŒ æ’¤é”€ ${removed}, ç»„åˆ=[${currentCombination}]`);
        }

        console.log(`${indent}[æ­¥éª¤${currentStep}] ğŸ backtrack(${startIndex}) å³å°†è¿”å›`);
    }

    backtrack(0);

    console.log('\nğŸ¯ æœ€ç»ˆç»“æœ:', result);
    console.log(`ğŸ“Š æ€»å…±æ‰§è¡Œäº† ${stepCount} ä¸ªé€’å½’è°ƒç”¨`);
}

// è¿è¡Œæ¼”ç¤º
demonstrateBacktrackTiming();
```

## ğŸ“ ç†è§£è¦ç‚¹æ€»ç»“

### 1. **é€’å½’çš„æœ¬è´¨**
- æ¯ä¸ªé€’å½’è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ª**ç‹¬ç«‹çš„å‡½æ•°æ‰§è¡Œç¯å¢ƒ**
- å½“æ·±å±‚é€’å½’è¿”å›æ—¶ï¼Œæµ…å±‚é€’å½’**ç»§ç»­æ‰§è¡Œ**å‰©ä½™ä»£ç 

### 2. **æ’¤é”€çš„çœŸæ­£æ—¶æœº**
- **æ¯æ¬¡å¾ªç¯è¿­ä»£å**éƒ½ä¼šæ’¤é”€
- **æ¯æ¬¡é€’å½’è°ƒç”¨è¿”å›å**éƒ½ä¼šæ’¤é”€
- **ä¸ä»…ä»…æ˜¯è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶å**

### 3. **ä¸ºä»€ä¹ˆéœ€è¦æ’¤é”€ï¼Ÿ**
- ä¿è¯**çŠ¶æ€ä¸€è‡´æ€§**ï¼šå›åˆ°åšé€‰æ‹©å‰çš„çŠ¶æ€
- å…è®¸**å°è¯•å…¶ä»–é€‰æ‹©**ï¼šforå¾ªç¯ç»§ç»­ä¸‹ä¸€æ¬¡è¿­ä»£
- ç¡®ä¿**æœç´¢çš„å®Œæ•´æ€§**ï¼šä¸é—æ¼ä»»ä½•å¯èƒ½çš„è§£

### 4. **å›æº¯ç®—æ³•çš„ç²¾é«“**
```javascript
for (choice in choices) {
    åšé€‰æ‹©;        // ä¿®æ”¹çŠ¶æ€
    é€’å½’(newState); // æ¢ç´¢è¿™ä¸ªé€‰æ‹©çš„åæœ
    æ’¤é”€é€‰æ‹©;      // ğŸ”´ æ¢å¤çŠ¶æ€ï¼Œä¸ºä¸‹ä¸€æ¬¡é€‰æ‹©åšå‡†å¤‡
}
```

## ğŸš¨ å¸¸è§è¯¯åŒº

### âŒ é”™è¯¯ç†è§£
"æ’¤é”€æ“ä½œåªåœ¨æ‰¾åˆ°è§£åæ‰æ‰§è¡Œ"

### âœ… æ­£ç¡®ç†è§£
"æ’¤é”€æ“ä½œåœ¨æ¯æ¬¡é€’å½’è¿”å›åéƒ½ä¼šæ‰§è¡Œï¼Œè¿™æ˜¯å›æº¯ç®—æ³•çš„æ ¸å¿ƒæœºåˆ¶"

### ğŸ’¡ å…³é”®åŒºåˆ«
- **é€’å½’è°ƒç”¨**ï¼šæ·±å…¥æ¢ç´¢
- **é€’å½’è¿”å›**ï¼šå›åˆ°ä¸Šä¸€å±‚ï¼Œå‡†å¤‡å°è¯•ä¸‹ä¸€ä¸ªé€‰æ‹©
- **æ’¤é”€æ“ä½œ**ï¼šå‘ç”Ÿåœ¨è¿”å›åï¼Œä¸ºä¸‹ä¸€æ¬¡é€‰æ‹©æ¸…ç†çŠ¶æ€

---

## ğŸ¯ æ€»ç»“

æ‚¨çš„è§‚å¯Ÿå¾ˆæ•é”ï¼ç¡®å®**è¡¨é¢ä¸Šçœ‹**æ’¤é”€æ“ä½œå¥½åƒåªåœ¨è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶åæ‰§è¡Œï¼Œä½†å®é™…ä¸Šï¼š

1. **æ’¤é”€æ“ä½œåœ¨æ¯æ¬¡é€’å½’è°ƒç”¨è¿”å›åéƒ½ä¼šæ‰§è¡Œ**
2. **ç»ˆæ­¢æ¡ä»¶åªæ˜¯é€’å½’çš„ä¸€ä¸ªå‡ºå£**ï¼Œä¸æ˜¯æ’¤é”€çš„å”¯ä¸€è§¦å‘ç‚¹
3. **å›æº¯çš„æœ¬è´¨**æ˜¯ï¼šå°è¯• â†’ æ¢ç´¢ â†’ æ’¤é”€ â†’ å°è¯•ä¸‹ä¸€ä¸ª

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå«"å›æº¯"ç®—æ³•â€”â€”å®ƒä¼š**å›é€€åˆ°ä¹‹å‰çš„çŠ¶æ€**ï¼Œç„¶å**å°è¯•å…¶ä»–å¯èƒ½æ€§**ï¼

---
*æ·±åº¦è§£æï¼šå›æº¯ç®—æ³•ä¸­æ’¤é”€é€‰æ‹©çš„çœŸæ­£æ‰§è¡Œæ—¶æœº*
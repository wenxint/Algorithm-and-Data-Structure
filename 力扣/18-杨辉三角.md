# æ¨è¾‰ä¸‰è§’é—®é¢˜å­¦ä¹ ç¬”è®°

## ğŸ“ é—®é¢˜æè¿°

**é¢˜ç›®**: ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° `numRows`ï¼Œç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰ `numRows` è¡Œã€‚

**æ¨è¾‰ä¸‰è§’è§„å¾‹**:
- æ¯è¡Œçš„é¦–æœ«å…ƒç´ éƒ½æ˜¯ 1
- å…¶ä»–å…ƒç´ ç­‰äºä¸Šä¸€è¡Œä¸­ç›¸é‚»ä¸¤ä¸ªå…ƒç´ çš„å’Œ
- ç¬¬ n è¡Œæœ‰ n+1 ä¸ªå…ƒç´ 

**ç¤ºä¾‹**:
```
è¾“å…¥: numRows = 5
è¾“å‡º: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]

å¯è§†åŒ–:
    1
   1 1
  1 2 1
 1 3 3 1
1 4 6 4 1
```

## ğŸ” ç”¨æˆ·åŸå§‹è§£æ³•åˆ†æ

### ç”¨æˆ·ä»£ç 
```javascript
function generate(numRows) {
    function currentRow(n) {
        if (n === 0) return [1];
        if (n === 1) return [1, 1];

        let prevRow = currentRow(n - 1);  // å…³é”®é—®é¢˜ï¼šé‡å¤è®¡ç®—
        let row = [1];

        for (let i = 1; i < n; i++) {
            row.push(prevRow[i - 1] + prevRow[i]);
        }
        row.push(1);
        return row;
    }

    let result = [];
    for (let i = 0; i < numRows; i++) {
        result.push(currentRow(i));
    }
    return result;
}
```

### âŒ æ€§èƒ½é—®é¢˜åˆ†æ

**1. æŒ‡æ•°çº§æ—¶é—´å¤æ‚åº¦**
- æ¯æ¬¡è°ƒç”¨ `currentRow(n)` éƒ½ä¼šé€’å½’è°ƒç”¨ `currentRow(n-1)`
- å­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦è¾¾åˆ° O(2^n)
- è®¡ç®—è¿‡ç¨‹ç¤ºä¾‹ï¼š
  ```
  generate(5)è°ƒç”¨ï¼š
  currentRow(0) - è®¡ç®—1æ¬¡
  currentRow(1) - è®¡ç®—1æ¬¡
  currentRow(2) - è®¡ç®—1æ¬¡ï¼Œå†…éƒ¨è°ƒç”¨currentRow(1)
  currentRow(3) - è®¡ç®—1æ¬¡ï¼Œå†…éƒ¨è°ƒç”¨currentRow(2)ï¼ŒcurrentRow(2)åˆè°ƒç”¨currentRow(1)
  currentRow(4) - é‡å¤è°ƒç”¨æ‰€æœ‰å‰é¢çš„è¡Œ
  ```

**2. æ ˆæº¢å‡ºé£é™©**
- é€’å½’æ·±åº¦è¿‡æ·±å¯èƒ½å¯¼è‡´æ ˆæº¢å‡º
- ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯æŒ‡æ•°çº§çš„

## âœ… ä¼˜åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šè®°å¿†åŒ–ç¼“å­˜ä¼˜åŒ–

```javascript
/**
 * æ¨è¾‰ä¸‰è§’ç”Ÿæˆå™¨ - è®°å¿†åŒ–ç¼“å­˜ç‰ˆæœ¬
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * ä½¿ç”¨Mapç¼“å­˜å·²è®¡ç®—çš„è¡Œï¼Œé¿å…é‡å¤è®¡ç®—
 * å°†æ—¶é—´å¤æ‚åº¦ä»O(2^n)ä¼˜åŒ–åˆ°O(nÂ²)
 *
 * @param {number} numRows - è¦ç”Ÿæˆçš„è¡Œæ•°
 * @returns {number[][]} æ¨è¾‰ä¸‰è§’æ•°ç»„
 * @time O(nÂ²) æ¯ä¸ªå…ƒç´ åªè®¡ç®—ä¸€æ¬¡
 * @space O(nÂ²) å­˜å‚¨ç»“æœå’Œç¼“å­˜
 */
function generateWithCache(numRows) {
    const cache = new Map(); // ç¼“å­˜å·²è®¡ç®—çš„è¡Œ

    function getCurrentRow(n) {
        // æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å·²å­˜åœ¨
        if (cache.has(n)) {
            return cache.get(n);
        }

        // åŸºç¡€æƒ…å†µ
        if (n === 0) {
            cache.set(0, [1]);
            return [1];
        }
        if (n === 1) {
            cache.set(1, [1, 1]);
            return [1, 1];
        }

        // é€’å½’è®¡ç®—ï¼ˆåˆ©ç”¨ç¼“å­˜ï¼‰
        const prevRow = getCurrentRow(n - 1);
        const row = [1]; // ç¬¬ä¸€ä¸ªå…ƒç´ æ€»æ˜¯1

        // è®¡ç®—ä¸­é—´å…ƒç´ 
        for (let i = 1; i < n; i++) {
            row.push(prevRow[i - 1] + prevRow[i]);
        }
        row.push(1); // æœ€åä¸€ä¸ªå…ƒç´ æ€»æ˜¯1

        // å­˜å…¥ç¼“å­˜
        cache.set(n, row);
        return row;
    }

    const result = [];
    for (let i = 0; i < numRows; i++) {
        result.push(getCurrentRow(i));
    }
    return result;
}
```

### æ–¹æ¡ˆäºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆæ¨èï¼‰

```javascript
/**
 * æ¨è¾‰ä¸‰è§’ç”Ÿæˆå™¨ - åŠ¨æ€è§„åˆ’ç‰ˆæœ¬
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * è‡ªåº•å‘ä¸Šæ„å»ºï¼Œæ¯ä¸€è¡ŒåŸºäºä¸Šä¸€è¡Œè®¡ç®—
 * é¿å…é€’å½’ï¼Œæ—¶é—´å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯æœ€ä¼˜çš„
 *
 * @param {number} numRows - è¦ç”Ÿæˆçš„è¡Œæ•°
 * @returns {number[][]} æ¨è¾‰ä¸‰è§’æ•°ç»„
 * @time O(nÂ²)
 * @space O(nÂ²) ä»…å­˜å‚¨ç»“æœ
 */
function generateDP(numRows) {
    if (numRows === 0) return [];

    const result = [];

    for (let i = 0; i < numRows; i++) {
        const row = new Array(i + 1); // ç¬¬iè¡Œæœ‰i+1ä¸ªå…ƒç´ 

        // é¦–æœ«å…ƒç´ éƒ½æ˜¯1
        row[0] = 1;
        row[i] = 1;

        // è®¡ç®—ä¸­é—´å…ƒç´ 
        for (let j = 1; j < i; j++) {
            row[j] = result[i - 1][j - 1] + result[i - 1][j];
        }

        result.push(row);
    }

    return result;
}
```

### æ–¹æ¡ˆä¸‰ï¼šç©ºé—´ä¼˜åŒ–ç‰ˆæœ¬

```javascript
/**
 * æ¨è¾‰ä¸‰è§’ç”Ÿæˆå™¨ - ç©ºé—´ä¼˜åŒ–ç‰ˆæœ¬
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * å¦‚æœåªéœ€è¦è¿”å›æœ€åä¸€è¡Œï¼Œå¯ä»¥åªç”¨ä¸¤ä¸ªæ•°ç»„äº¤æ›¿ä½¿ç”¨
 * è¿›ä¸€æ­¥ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦
 *
 * @param {number} numRows - è¦ç”Ÿæˆçš„è¡Œæ•°
 * @returns {number[][]} æ¨è¾‰ä¸‰è§’æ•°ç»„
 * @time O(nÂ²)
 * @space O(n) å¦‚æœåªéœ€è¦æœ€åä¸€è¡Œ
 */
function generateOptimized(numRows) {
    if (numRows === 0) return [];

    const result = [[1]]; // ç¬¬0è¡Œ

    for (let i = 1; i < numRows; i++) {
        const prevRow = result[i - 1];
        const row = [1]; // ç¬¬ä¸€ä¸ªå…ƒç´ 

        // è®¡ç®—ä¸­é—´å…ƒç´ 
        for (let j = 1; j < i; j++) {
            row[j] = prevRow[j - 1] + prevRow[j];
        }

        row.push(1); // æœ€åä¸€ä¸ªå…ƒç´ 
        result.push(row);
    }

    return result;
}
```

### æ–¹æ¡ˆå››ï¼šæ•°å­¦å…¬å¼æ³•

```javascript
/**
 * æ¨è¾‰ä¸‰è§’ç”Ÿæˆå™¨ - æ•°å­¦å…¬å¼ç‰ˆæœ¬
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * æ¨è¾‰ä¸‰è§’çš„ç¬¬nè¡Œç¬¬kä¸ªå…ƒç´ ç­‰äºç»„åˆæ•°C(n,k)
 * ä½¿ç”¨ç»„åˆæ•°å…¬å¼ç›´æ¥è®¡ç®—
 *
 * @param {number} numRows - è¦ç”Ÿæˆçš„è¡Œæ•°
 * @returns {number[][]} æ¨è¾‰ä¸‰è§’æ•°ç»„
 * @time O(nÂ²)
 * @space O(nÂ²)
 */
function generateMath(numRows) {
    function combination(n, k) {
        if (k === 0 || k === n) return 1;

        // ä¼˜åŒ–ï¼šC(n,k) = C(n,n-k)ï¼Œé€‰æ‹©è¾ƒå°çš„k
        k = Math.min(k, n - k);

        let result = 1;
        for (let i = 0; i < k; i++) {
            result = result * (n - i) / (i + 1);
        }
        return Math.round(result); // å¤„ç†æµ®ç‚¹ç²¾åº¦é—®é¢˜
    }

    const result = [];
    for (let i = 0; i < numRows; i++) {
        const row = [];
        for (let j = 0; j <= i; j++) {
            row.push(combination(i, j));
        }
        result.push(row);
    }
    return result;
}
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ä¼˜ç¼ºç‚¹ |
|------|------------|------------|--------|
| åŸå§‹é€’å½’ | O(2^n) | O(2^n) | âŒ æŒ‡æ•°çº§å¤æ‚åº¦ï¼Œæ€§èƒ½æå·® |
| è®°å¿†åŒ–ç¼“å­˜ | O(nÂ²) | O(nÂ²) | âœ… å¤§å¹…ä¼˜åŒ–ï¼Œé€‚åˆé€’å½’æ€ç»´ |
| åŠ¨æ€è§„åˆ’ | O(nÂ²) | O(nÂ²) | âœ… æœ€ä¼˜è§£ï¼Œé€»è¾‘æ¸…æ™° |
| ç©ºé—´ä¼˜åŒ– | O(nÂ²) | O(n) | âœ… ç©ºé—´æœ€ä¼˜ï¼ˆå¦‚æœåªéœ€æœ€åä¸€è¡Œï¼‰ |
| æ•°å­¦å…¬å¼ | O(nÂ²) | O(nÂ²) | âœ… æ•°å­¦ç¾æ„Ÿï¼Œä½†éœ€å¤„ç†ç²¾åº¦ |

## ğŸ’¡ æ ¸å¿ƒå­¦ä¹ è¦ç‚¹

### 1. ç¼“å­˜çš„é‡è¦æ€§
```javascript
// ç¼“å­˜æ¨¡å¼
const cache = new Map();
if (cache.has(key)) {
    return cache.get(key); // å‘½ä¸­ç¼“å­˜
}
const result = computeExpensive(key);
cache.set(key, result); // å­˜å…¥ç¼“å­˜
return result;
```

### 2. é€’å½’ vs è¿­ä»£
- **é€’å½’**ï¼šæ€è·¯ç›´è§‚ï¼Œä½†å¯èƒ½æœ‰æ€§èƒ½é—®é¢˜
- **è¿­ä»£**ï¼šæ€§èƒ½æ›´å¥½ï¼Œæ ˆå®‰å…¨

### 3. æ¨è¾‰ä¸‰è§’çš„æ•°å­¦æ€§è´¨
- å¯¹ç§°æ€§ï¼š`triangle[i][j] = triangle[i][i-j]`
- ç»„åˆæ•°æ€§è´¨ï¼š`triangle[i][j] = C(i,j)`
- å¸•æ–¯å¡æ’ç­‰å¼ï¼š`C(n,k) = C(n-1,k-1) + C(n-1,k)`

## ğŸ¯ æµ‹è¯•ç”¨ä¾‹

```javascript
// æµ‹è¯•å‡½æ•°
function testGenerate() {
    const testCases = [
        { input: 0, expected: [] },
        { input: 1, expected: [[1]] },
        { input: 3, expected: [[1],[1,1],[1,2,1]] },
        { input: 5, expected: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]] }
    ];

    testCases.forEach(({ input, expected }, index) => {
        const result = generateDP(input);
        console.log(`æµ‹è¯•ç”¨ä¾‹ ${index + 1}:`,
                   JSON.stringify(result) === JSON.stringify(expected) ? 'âœ…' : 'âŒ');
    });
}

// æ€§èƒ½æµ‹è¯•
function performanceTest() {
    const n = 20;

    console.time('è®°å¿†åŒ–ç¼“å­˜ç‰ˆæœ¬');
    generateWithCache(n);
    console.timeEnd('è®°å¿†åŒ–ç¼“å­˜ç‰ˆæœ¬');

    console.time('åŠ¨æ€è§„åˆ’ç‰ˆæœ¬');
    generateDP(n);
    console.timeEnd('åŠ¨æ€è§„åˆ’ç‰ˆæœ¬');

    console.time('æ•°å­¦å…¬å¼ç‰ˆæœ¬');
    generateMath(n);
    console.timeEnd('æ•°å­¦å…¬å¼ç‰ˆæœ¬');
}
```

## ğŸ“š æ€»ç»“

1. **æ€§èƒ½ä¼˜åŒ–æ€ç»´**ï¼šä»æŒ‡æ•°çº§ä¼˜åŒ–åˆ°å¤šé¡¹å¼çº§æ˜¯è´¨çš„é£è·ƒ
2. **ç¼“å­˜ç­–ç•¥**ï¼šè®°å¿†åŒ–æ˜¯ä¼˜åŒ–é€’å½’ç®—æ³•çš„åˆ©å™¨
3. **ç®—æ³•é€‰æ‹©**ï¼šåŠ¨æ€è§„åˆ’é€šå¸¸æ˜¯æœ€ç¨³å®šçš„é€‰æ‹©
4. **æ•°å­¦åº”ç”¨**ï¼šç†è§£æ•°å­¦æœ¬è´¨èƒ½æä¾›æ›´ä¼˜é›…çš„è§£æ³•
5. **æµ‹è¯•é©±åŠ¨**ï¼šå®Œå–„çš„æµ‹è¯•ç”¨ä¾‹æ˜¯ç®—æ³•æ­£ç¡®æ€§çš„ä¿è¯

**æ¨èè§£æ³•**ï¼šåŠ¨æ€è§„åˆ’ç‰ˆæœ¬ï¼Œå…¼å…·æ•ˆç‡å’Œå¯è¯»æ€§ï¼
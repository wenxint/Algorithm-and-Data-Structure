# å­—ç¬¦ä¸²å…¨æ’åˆ—ç®—æ³•åˆ†æ ğŸ”¤

## ğŸ¯ ç®—æ³•æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨å›æº¯ç®—æ³•å®ç°å­—ç¬¦ä¸²å…¨æ’åˆ—çš„ç»å…¸æ¡ˆä¾‹ã€‚é€šè¿‡é€’å½’å’Œå›æº¯çš„æ–¹å¼ï¼Œç³»ç»Ÿåœ°ç”Ÿæˆå­—ç¬¦ä¸² `"abc"` çš„æ‰€æœ‰å¯èƒ½æ’åˆ—ã€‚

## ğŸ’» åŸå§‹ä»£ç åˆ†æ

### ğŸ“ æ‚¨çš„å®ç°
```javascript
var str = "abc",
    ret = [],
    strArr = str.split("");

// è¿™ä¸ªæ–¹æ³•å¯ä»¥ç†è§£ä¸ºå¾€ä¸‹æ·»åŠ ä¸é‡è´Ÿçš„å…ƒç´ 
function backtrake(path) {
    if (path.length === strArr.length) {
        ret.push(path.join(""));
        return;
    } // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶

    for (let i = 0; i < strArr.length; i++) {
        if (path.includes(strArr[i])) continue; // æ’é™¤é‡å¤é¡¹
        path.push(strArr[i]); // æ·»åŠ æœ‰ç”¨é¡¹
        backtrake(path); // é€’å½’
        path.pop(); // å›æº¯
    }
}
backtrake([]);
console.log(ret);
```

### ğŸ” ä»£ç ç»“æ„åˆ†æ

#### 1. **æ•°æ®å‡†å¤‡**
```javascript
var str = "abc",          // åŸå§‹å­—ç¬¦ä¸²
    ret = [],             // å­˜å‚¨æ‰€æœ‰æ’åˆ—ç»“æœ
    strArr = str.split(""); // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ ['a', 'b', 'c']
```

#### 2. **æ ¸å¿ƒå›æº¯å‡½æ•°**
```javascript
function backtrake(path) {
    // path: å½“å‰æ­£åœ¨æ„å»ºçš„æ’åˆ—è·¯å¾„
}
```

#### 3. **ç»ˆæ­¢æ¡ä»¶**
```javascript
if (path.length === strArr.length) {
    ret.push(path.join(""));  // å°†å­—ç¬¦æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¿å­˜
    return;
}
```

#### 4. **é€‰æ‹©å’Œå›æº¯é€»è¾‘**
```javascript
for (let i = 0; i < strArr.length; i++) {
    if (path.includes(strArr[i])) continue; // å»é‡æ£€æŸ¥
    path.push(strArr[i]);                   // åšé€‰æ‹©
    backtrake(path);                        // é€’å½’æ¢ç´¢
    path.pop();                             // æ’¤é”€é€‰æ‹©
}
```

## ğŸ¬ æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤º

### è¯¦ç»†è¿½è¸ª `backtrake([])` çš„æ‰§è¡Œè¿‡ç¨‹ï¼š

```
ğŸš€ å¼€å§‹æ‰§è¡Œ backtrake([])
å½“å‰è·¯å¾„: []ï¼Œç›®æ ‡é•¿åº¦: 3

â”Œâ”€ ç¬¬1å±‚é€’å½’ â”€â”
â”‚ å°è¯•å­—ç¬¦ 'a' â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ path: ['a'] â”‚
â”‚ é€’å½’è°ƒç”¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”Œâ”€ ç¬¬2å±‚é€’å½’ â”€â”
    â”‚ å½“å‰è·¯å¾„: ['a'] â”‚
    â”‚ å°è¯•å­—ç¬¦ 'b'   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ path: ['a','b'] â”‚
    â”‚ é€’å½’è°ƒç”¨       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€ ç¬¬3å±‚é€’å½’ â”€â”
        â”‚ å½“å‰è·¯å¾„: ['a','b'] â”‚
        â”‚ å°è¯•å­—ç¬¦ 'c'       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ path: ['a','b','c'] â”‚
        â”‚ é•¿åº¦=3ï¼Œä¿å­˜"abc" âœ… â”‚
        â”‚ return            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
    â”Œâ”€ å›åˆ°ç¬¬2å±‚ â”€â”
    â”‚ æ’¤é”€ 'c'    â”‚
    â”‚ path: ['a','b'] â”‚
    â”‚ ç»§ç»­å°è¯•å…¶ä»–å­—ç¬¦ â”‚
    â”‚ (æ— å…¶ä»–å¯é€‰)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
â”Œâ”€ å›åˆ°ç¬¬1å±‚ â”€â”
â”‚ æ’¤é”€ 'b'    â”‚
â”‚ path: ['a'] â”‚
â”‚ å°è¯•å­—ç¬¦ 'c' â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ path: ['a','c'] â”‚
â”‚ é€’å½’è°ƒç”¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”Œâ”€ ç¬¬2å±‚é€’å½’ â”€â”
    â”‚ å½“å‰è·¯å¾„: ['a','c'] â”‚
    â”‚ å°è¯•å­—ç¬¦ 'b'       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ path: ['a','c','b'] â”‚
    â”‚ é•¿åº¦=3ï¼Œä¿å­˜"acb" âœ… â”‚
    â”‚ return            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

... ç»§ç»­ç±»ä¼¼è¿‡ç¨‹ ...

æœ€ç»ˆç»“æœ: ["abc", "acb", "bac", "bca", "cab", "cba"]
```

## ğŸŒ³ å†³ç­–æ ‘å¯è§†åŒ–

```
                    []
                /   |   \
           é€‰a /    |é€‰b  \ é€‰c
             /     |      \
         ['a']   ['b']   ['c']
         /  \     / \     / \
    é€‰b /    \é€‰c é€‰a/  \é€‰c é€‰a/  \é€‰b
      /      \   /    \   /    \
  ['a','b'] ['a','c'] ['b','a'] ['b','c'] ['c','a'] ['c','b']
     |        |        |        |        |        |
  é€‰c|     é€‰b|     é€‰c|     é€‰a|     é€‰b|     é€‰a|
     |        |        |        |        |        |
   "abc"âœ…  "acb"âœ…  "bac"âœ…  "bca"âœ…  "cab"âœ…  "cba"âœ…
```

## ğŸ¯ ç®—æ³•ä¼˜ç‚¹åˆ†æ

### âœ… æ­£ç¡®æ€§
1. **å®Œæ•´æ€§**ï¼šèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—
2. **æ— é‡å¤**ï¼šé€šè¿‡ `path.includes(strArr[i])` é¿å…é‡å¤ä½¿ç”¨å­—ç¬¦
3. **æœ‰åºæ€§**ï¼šæŒ‰ç…§å­—å…¸åºçš„æŸç§è§„å¾‹ç”Ÿæˆç»“æœ

### âœ… æ¸…æ™°æ€§
1. **é€»è¾‘ç®€å•**ï¼šå›æº¯æ¨¡æ¿çš„æ ‡å‡†å®ç°
2. **æ˜“äºç†è§£**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šæ°å½“
3. **è°ƒè¯•å‹å¥½**ï¼šæ‰§è¡Œè¿‡ç¨‹å®¹æ˜“è¿½è¸ª

### âœ… é€šç”¨æ€§
1. **é€‚ç”¨æ€§å¹¿**ï¼šå¯ä»¥è½»æ¾ä¿®æ”¹ä¸ºå¤„ç†å…¶ä»–å­—ç¬¦ä¸²
2. **æ‰©å±•æ€§å¥½**ï¼šå¯ä»¥æ·»åŠ æ›´å¤šçº¦æŸæ¡ä»¶

## âš ï¸ æ½œåœ¨é—®é¢˜ä¸æ”¹è¿›å»ºè®®

### ğŸ”´ æ€§èƒ½é—®é¢˜

#### é—®é¢˜1ï¼š`path.includes()` çš„æ—¶é—´å¤æ‚åº¦
```javascript
if (path.includes(strArr[i])) continue; // O(n) æ—¶é—´å¤æ‚åº¦
```

**å½±å“**ï¼šæ¯æ¬¡æ£€æŸ¥éƒ½éœ€è¦éå†æ•´ä¸ªè·¯å¾„æ•°ç»„
**æ”¹è¿›æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `visited` æ•°ç»„æˆ– `Set` æ¥æ ‡è®°å·²ä½¿ç”¨çš„å­—ç¬¦

#### é—®é¢˜2ï¼šå­—ç¬¦ä¸²æ‹¼æ¥å¼€é”€
```javascript
ret.push(path.join("")); // æ¯æ¬¡éƒ½éœ€è¦æ‹¼æ¥å­—ç¬¦ä¸²
```

**æ”¹è¿›æ–¹æ¡ˆ**ï¼šå¦‚æœåªéœ€è¦æ•°ç»„å½¢å¼ï¼Œå¯ä»¥é¿å…å­—ç¬¦ä¸²è½¬æ¢

### ğŸ”§ ä¼˜åŒ–ç‰ˆæœ¬

```javascript
/**
 * ä¼˜åŒ–ç‰ˆæœ¬1ï¼šä½¿ç”¨è®¿é—®æ ‡è®°æ•°ç»„
 */
function optimizedPermutation1(str) {
    const result = [];
    const chars = str.split("");
    const path = [];
    const visited = new Array(chars.length).fill(false);

    function backtrack() {
        // ç»ˆæ­¢æ¡ä»¶
        if (path.length === chars.length) {
            result.push(path.join(""));
            return;
        }

        // å°è¯•æ¯ä¸ªå­—ç¬¦
        for (let i = 0; i < chars.length; i++) {
            if (visited[i]) continue; // O(1) æ—¶é—´å¤æ‚åº¦æ£€æŸ¥

            // åšé€‰æ‹©
            path.push(chars[i]);
            visited[i] = true;

            // é€’å½’
            backtrack();

            // æ’¤é”€é€‰æ‹©
            path.pop();
            visited[i] = false;
        }
    }

    backtrack();
    return result;
}

/**
 * ä¼˜åŒ–ç‰ˆæœ¬2ï¼šä½¿ç”¨Setè¿›è¡Œå»é‡
 */
function optimizedPermutation2(str) {
    const result = [];
    const chars = str.split("");
    const path = [];
    const used = new Set();

    function backtrack() {
        if (path.length === chars.length) {
            result.push([...path]); // è¿”å›æ•°ç»„å½¢å¼ï¼Œé¿å…å­—ç¬¦ä¸²æ‹¼æ¥
            return;
        }

        for (let i = 0; i < chars.length; i++) {
            if (used.has(i)) continue; // O(1) æ—¶é—´å¤æ‚åº¦

            path.push(chars[i]);
            used.add(i);

            backtrack();

            path.pop();
            used.delete(i);
        }
    }

    backtrack();
    return result;
}

/**
 * ä¼˜åŒ–ç‰ˆæœ¬3ï¼šåŸåœ°äº¤æ¢æ³•ï¼ˆæœ€é«˜æ•ˆï¼‰
 */
function optimizedPermutation3(str) {
    const result = [];
    const chars = str.split("");

    function backtrack(start) {
        if (start === chars.length) {
            result.push(chars.join(""));
            return;
        }

        for (let i = start; i < chars.length; i++) {
            // äº¤æ¢
            [chars[start], chars[i]] = [chars[i], chars[start]];

            // é€’å½’
            backtrack(start + 1);

            // å›æº¯ï¼ˆäº¤æ¢å›æ¥ï¼‰
            [chars[start], chars[i]] = [chars[i], chars[start]];
        }
    }

    backtrack(0);
    return result;
}
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | å»é‡æ£€æŸ¥ | ä¼˜ç¼ºç‚¹ |
|------|------------|------------|----------|---------|
| åŸå§‹ç‰ˆæœ¬ | O(n! Ã— nÂ²) | O(n) | O(n) | ç®€å•æ˜“æ‡‚ï¼Œä½†æ•ˆç‡è¾ƒä½ |
| è®¿é—®æ ‡è®°ç‰ˆæœ¬ | O(n! Ã— n) | O(n) | O(1) | æ•ˆç‡æå‡ï¼Œé€»è¾‘æ¸…æ™° |
| Setç‰ˆæœ¬ | O(n! Ã— n) | O(n) | O(1) | ç°ä»£åŒ–å†™æ³•ï¼Œæ€§èƒ½å¥½ |
| åŸåœ°äº¤æ¢ç‰ˆæœ¬ | O(n! Ã— n) | O(1) | æ— éœ€æ£€æŸ¥ | æœ€é«˜æ•ˆï¼Œä½†ç†è§£ç¨éš¾ |

## ğŸ® å®Œæ•´æµ‹è¯•ä»£ç 

```javascript
/**
 * å®Œæ•´çš„æµ‹è¯•å’Œå¯¹æ¯”ä»£ç 
 */
function testAllVersions() {
    console.log("=== å­—ç¬¦ä¸²å…¨æ’åˆ—ç®—æ³•å¯¹æ¯”æµ‹è¯• ===\n");

    const testString = "abc";

    // åŸå§‹ç‰ˆæœ¬
    console.log("1. åŸå§‹ç‰ˆæœ¬ï¼š");
    console.time("åŸå§‹ç‰ˆæœ¬");
    const result1 = originalPermutation(testString);
    console.timeEnd("åŸå§‹ç‰ˆæœ¬");
    console.log("ç»“æœ:", result1);
    console.log("");

    // ä¼˜åŒ–ç‰ˆæœ¬1
    console.log("2. ä¼˜åŒ–ç‰ˆæœ¬1ï¼ˆè®¿é—®æ ‡è®°ï¼‰ï¼š");
    console.time("ä¼˜åŒ–ç‰ˆæœ¬1");
    const result2 = optimizedPermutation1(testString);
    console.timeEnd("ä¼˜åŒ–ç‰ˆæœ¬1");
    console.log("ç»“æœ:", result2);
    console.log("");

    // ä¼˜åŒ–ç‰ˆæœ¬2
    console.log("3. ä¼˜åŒ–ç‰ˆæœ¬2ï¼ˆSetï¼‰ï¼š");
    console.time("ä¼˜åŒ–ç‰ˆæœ¬2");
    const result3 = optimizedPermutation2(testString);
    console.timeEnd("ä¼˜åŒ–ç‰ˆæœ¬2");
    console.log("ç»“æœ:", result3);
    console.log("");

    // ä¼˜åŒ–ç‰ˆæœ¬3
    console.log("4. ä¼˜åŒ–ç‰ˆæœ¬3ï¼ˆåŸåœ°äº¤æ¢ï¼‰ï¼š");
    console.time("ä¼˜åŒ–ç‰ˆæœ¬3");
    const result4 = optimizedPermutation3(testString);
    console.timeEnd("ä¼˜åŒ–ç‰ˆæœ¬3");
    console.log("ç»“æœ:", result4);
    console.log("");

    // éªŒè¯ç»“æœä¸€è‡´æ€§
    console.log("ç»“æœéªŒè¯:",
        result1.length === result2.length &&
        result2.length === result3.length &&
        result3.length === result4.length ? "âœ… é€šè¿‡" : "âŒ å¤±è´¥");
}

// åŸå§‹ç‰ˆæœ¬å‡½æ•°
function originalPermutation(str) {
    const ret = [];
    const strArr = str.split("");

    function backtrake(path) {
        if (path.length === strArr.length) {
            ret.push(path.join(""));
            return;
        }

        for (let i = 0; i < strArr.length; i++) {
            if (path.includes(strArr[i])) continue;
            path.push(strArr[i]);
            backtrake(path);
            path.pop();
        }
    }

    backtrake([]);
    return ret;
}

// è¿è¡Œæµ‹è¯•
testAllVersions();
```

## ğŸ“ å­¦ä¹ è¦ç‚¹æ€»ç»“

### ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ
1. **å›æº¯æ¨¡æ¿**ï¼šé€‰æ‹© â†’ é€’å½’ â†’ æ’¤é”€
2. **çŠ¶æ€ç®¡ç†**ï¼šå¦‚ä½•è·Ÿè¸ªå·²ä½¿ç”¨çš„å­—ç¬¦
3. **ç»ˆæ­¢æ¡ä»¶**ï¼šä½•æ—¶ä¿å­˜ä¸€ä¸ªå®Œæ•´çš„æ’åˆ—
4. **å»é‡ç­–ç•¥**ï¼šé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå­—ç¬¦

### ğŸ¯ ç®—æ³•æ€æƒ³
1. **ç³»ç»Ÿæ€§ç©·ä¸¾**ï¼šå°è¯•æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ç»„åˆ
2. **çº¦æŸæ»¡è¶³**ï¼šæ¯ä¸ªå­—ç¬¦åªèƒ½ä½¿ç”¨ä¸€æ¬¡
3. **æ·±åº¦ä¼˜å…ˆæœç´¢**ï¼šä¼˜å…ˆå®Œæˆå½“å‰è·¯å¾„çš„æ¢ç´¢
4. **çŠ¶æ€å›é€€**ï¼šæ’¤é”€é€‰æ‹©ï¼Œå°è¯•å…¶ä»–å¯èƒ½

### ğŸš€ ä¼˜åŒ–æ€è·¯
1. **æ—¶é—´ä¼˜åŒ–**ï¼šä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„è¿›è¡Œå»é‡æ£€æŸ¥
2. **ç©ºé—´ä¼˜åŒ–**ï¼šå‡å°‘ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶å’Œè½¬æ¢
3. **ç®—æ³•ä¼˜åŒ–**ï¼šä½¿ç”¨åŸåœ°äº¤æ¢ç­‰æŠ€å·§å‡å°‘é¢å¤–ç©ºé—´

### ğŸ¨ æ‰©å±•åº”ç”¨
1. **å¤„ç†é‡å¤å­—ç¬¦**ï¼šåœ¨å­—ç¬¦ä¸²åŒ…å«é‡å¤å­—ç¬¦æ—¶çš„å»é‡ç­–ç•¥
2. **éƒ¨åˆ†æ’åˆ—**ï¼šç”Ÿæˆé•¿åº¦ä¸ºkçš„æ’åˆ—
3. **å¸¦çº¦æŸçš„æ’åˆ—**ï¼šæ·»åŠ é¢å¤–çš„çº¦æŸæ¡ä»¶
4. **å­—å…¸åºæ’åˆ—**ï¼šæŒ‰å­—å…¸åºç”Ÿæˆæ’åˆ—

## ğŸ¯ æ€»ç»“è¯„ä»·

æ‚¨çš„å®ç°ä½“ç°äº†å›æº¯ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘æ­£ç¡®ã€‚ä¸»è¦ä¼˜ç‚¹ï¼š

âœ… **æ­£ç¡®æ€§**ï¼šèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰æ’åˆ—ä¸”æ— é‡å¤
âœ… **å¯è¯»æ€§**ï¼šä»£ç ç®€æ´ï¼Œæ³¨é‡Šæ°å½“
âœ… **é€šç”¨æ€§**ï¼šæ˜“äºä¿®æ”¹å’Œæ‰©å±•

ä¸»è¦æ”¹è¿›ç©ºé—´ï¼š

ğŸ”§ **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨æ›´é«˜æ•ˆçš„å»é‡æ£€æŸ¥æ–¹æ³•
ğŸ”§ **ä»£ç è§„èŒƒ**ï¼šå‡½æ•°å‘½åå¯ä»¥æ›´æ ‡å‡†åŒ–
ğŸ”§ **é”™è¯¯å¤„ç†**ï¼šå¯ä»¥æ·»åŠ è¾“å…¥éªŒè¯

æ€»ä½“è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å›æº¯ç®—æ³•å­¦ä¹ æ¡ˆä¾‹ï¼

---
*ç®—æ³•åˆ†æï¼šå­—ç¬¦ä¸²å…¨æ’åˆ—çš„å›æº¯å®ç°ä¸ä¼˜åŒ–*